

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>estimator &mdash; QuaternionUkf 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="estimator" href="estimator.html" />
    <link rel="prev" title="Quaternion UKF" href="includeme.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> QuaternionUkf
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">Quaternion UKF</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">estimator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="estimator.html">estimator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-estimator">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">QuaternionUkf</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>estimator</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/modules.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="estimator">
<h1>estimator<a class="headerlink" href="#estimator" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="estimator.html">estimator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data.html">estimator.data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="data.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#module-estimator.data.datamaker">datamaker</a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#module-estimator.data.datasource">datasource</a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#module-estimator.data.datastore">datastore</a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#module-estimator.data.trainer">trainer</a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#module-estimator.data.trajectoryplanner">trajectoryplanner</a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#module-estimator.data.utilities">utilities</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#module-estimator.constants">constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#module-estimator.quaternions">quaternions</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#module-estimator.quaternionukf">quaternionukf</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#module-estimator.roll_pitch_calculator">roll_pitch_calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#module-estimator.state_estimator">state_estimator</a></li>
<li class="toctree-l2"><a class="reference internal" href="estimator.html#module-estimator.velocity_integrator">velocity_integrator</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="module-estimator">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-estimator" title="Permalink to this headline">¶</a></h2>
<p>Running this module runs a demo that plots a comparison of the UKF, the result of just integrating the gyro data, and the result of calculating the roll and pitch from the acceleromter data correctly. See the README for why the yaw can’t be calculated directly.</p>
<p>To run the estimators with toy data, you can use the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make run
</pre></div>
</div>
<p>To run the estimators on real data from an IMU, specify a dataset number from 1 to 3:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make run <span class="nv">DATASET</span><span class="o">=</span>&lt;n&gt;
</pre></div>
</div>
<p>Where <code class="code docutils literal notranslate"><span class="pre">&lt;n&gt;</span></code> is a number from 1 to 3.</p>
<p>These datasets were provided by the instructors as part of the project. The output of the demo are the graphs of roll, pitch, and yaw, and the RMSE of each angle is printed to stdout.</p>
<p>For a well-tuned filter, the RMSE of the UKF will beat (be lower than) that of integrating the gyro data <strong>or</strong> calculating roll and pitch from the accelerometer.</p>
<p>This is evident when you look at the results of running the estimators on the toy data, which has the following output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RollPitchCalculator</span> <span class="n">RMSE</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0019</span><span class="p">,</span> <span class="mf">0.0024</span><span class="p">,</span> <span class="mf">0.9610</span><span class="p">]</span>
<span class="n">VelocityIntegrator</span> <span class="n">RMSE</span><span class="p">:</span>  <span class="p">[</span><span class="mf">0.6236</span><span class="p">,</span> <span class="mf">0.4494</span><span class="p">,</span> <span class="mf">0.3113</span><span class="p">]</span>
<span class="n">QuaternionUkf</span> <span class="n">RMSE</span><span class="p">:</span>       <span class="p">[</span><span class="mf">0.0013</span><span class="p">,</span> <span class="mf">0.0017</span><span class="p">,</span> <span class="mf">0.1045</span><span class="p">]</span>
</pre></div>
</div>
<p>Even though the gyro data has a <strong>lot</strong> of drift, the UKF is able to fuse the sensor data into a more accurate estimate than if one sensor had been trusted completely.</p>
<p>Getting a good model of the noise for the toy data is easy because I defined the model, but the same isn’t true for the real IMU data. I’ve made my best guess for the process and measurement noise by looking at the coefficient of determination from calibrating the data.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="estimator.html" class="btn btn-neutral float-right" title="estimator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="includeme.html" class="btn btn-neutral float-left" title="Quaternion UKF" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Matt Lisle

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>